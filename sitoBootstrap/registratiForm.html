<!DOCTYPE html>
<html lang="it">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content ="width=device-width, initial-scale=1">
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <link rel="icon" type="image/ico" href="../utils/AnyConv.com__Schermata 2022-07-02 alle 18.49.15_11zon.ico">
        <title>Registrazione</title>
        <link rel="stylesheet" href="./form.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
        
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>  
        <script src="https://kit.fontawesome.com/4c3d961aed.js" crossorigin="anonymous"></script>

    </head>
    <body style="background-color: #66f378; ">
        <nav class="navbar navbar-expand-lg" style="background-color: #1fa70d;">
    
            <div class="container-fluid">
               
                <a class="navbar-brand" href="#">
                     <img src="../utils/AnyConv.com__Schermata 2022-07-02 alle 18.49.15_11zon.ico" alt="icona" width="30" height="24" class="d-inline-block align-text-top">
                PharmaWare
                </a>
               
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="./SitoBootstrap.html">Home</a>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      operazioni
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="./registratiForm.html">iscriviti</a></li>
                      <li><a class="dropdown-item" href="#">visualizza codice</a></li>
                    </ul>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="./contatti.html">Contattaci</a>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
          <!-- inserisco il form per la registrazione-->
          <form class="container needs-validation col-sm-8 mt-3" id="myForm" action="" novalidate>
            <p class="lead h3">Dati Anagrafici</p>

            <div class="form-group">
                <label for="nome">Nome *</label>
                <input id="nome" name="nome" type="text" class="form-control" maxlength="40" required/>
                <div class="invalid-feedback">
                    Inserire nome
                </div>
                <label for="cognome">Cognome *</label>
                <input id="cognome" name="cognome" type="text" class="form-control" maxlength="40" required/>
                <div class="invalid-feedback">
                    Inserire cognome
                </div>
                    <label for="birthdate">Data di Nascita *</label>
                    <input name="birthdate" id="birthdate" type="date" class="form-control" required/>
                    <div class="invalid-feedback">
                        Selezionare la data di nascita
                    </div>
                
            </div>

            <div class="custom-control custom-radio custom-control-inline mt-2">
                <input type="radio" class="custom-control-input" id="male" name="gender" value="male" required>
                <label class="custom-control-label" for="male">Uomo</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline mt-2">
                <input type="radio" class="custom-control-input" id="female" name="gender" value="female" required>
                <label class="custom-control-label" for="female">Donna</label><br>
                <div class="invalid-feedback ml-2">
                    &nbsp; &nbsp; &nbsp;  Inserire il genere
                </div>
            </div>
            <br>

            <p class="lead h3">Nato a: *</p>

            <div class=" mb-3">
                
                    <label for="region">Regione</label>
                
                <select id="region" class="custom-select" name="region" required>
                    <option value="" selected></option>
                    <option value="0">Abruzzo</option>
                    <option value="1">Basilicata</option>
                    <option value="2">Calabria</option>
                    <option value="3">Campania</option>
                    <option value="4">Emilia-Romagna</option>
                    <option value="5">Friuli-Venezia Giulia</option>
                    <option value="6">Lazio</option>
                    <option value="7">Liguria</option>
                    <option value="8">Lombardia</option>
                    <option value="9">Marche</option>
                    <option value="10">Molise</option>
                    <option value="11">Piemonte</option>
                    <option value="12">Puglia</option>
                    <option value="13">Sardegna</option>
                    <option value="14">Sicilia</option>
                    <option value="15">Toscana</option>
                    <option value="16">Trentino-Alto Adige</option>
                    <option value="17">Umbria</option>
                    <option value="18">Valle d'Aosta</option>
                    <option value="19">Veneto</option>
                </select>
                <div class="invalid-feedback">
                    Selezionare la regione di nascita
                </div>
            </div>

            <div class=" mb-3">
                
                    <label for="state">Provincia</label>
                    <input id="state" name="state" type="text" class="form-control" required/>
                
                <div class="invalid-feedback">
                    Inserire la provincia di nascita
                </div>
            </div>

            <div class="mb-3">
                
                    <label for="town">Comune</label>
                    <input id="town" name="town" type="text" class="form-control" required/>
                
                <div class="invalid-feedback">
                    Inserire il comune di nascita
                </div>
            </div>

            <p class="lead h3">Indirizzo</p>
            <div class="form-row">
                <div class="col-6">
                    <label for="address">Via/Piazza</label>
                    <input name="address" id="address" type="text" pattern='^\w(?=.*[\w|\s])(?!.*[\\\-\^_$£%&@#+!;:.,"]).+$' class="form-control" maxlength="40" required/>
                    <div class="invalid-feedback">
                        Inserire la via
                    </div>
                </div>
                
                <div class="col-3">
                    <label for="addressnum">N.</label>
                    <input name="addressnum" id="addressnum" type="number" class="form-control" min="1" max="9999" size="4" maxlength="4" disabled />
                    <div class="invalid-feedback">
                        1 - 9999
                    </div>
                </div>
                <div class="col-3">
                    <label for="cap">CAP.</label>
                    <input name="cap" id="cap" type="tel" class="form-control" pattern="^\d{5}$" placeholder="#####" title="Inserire 5 cifre da 00100 a 98168" size="5" maxlength="5" disabled />
                    <div class="invalid-feedback">
                        00010 - 98168
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="col">
                    <label for="city">Località</label>
                    <input name="city" id="city" type="text" class="form-control" maxlength="15" disabled />
                    <div class="invalid-feedback">
                        Nome località
                    </div>
                </div>
                <div class="col">
                    <label for="tel">Tel.</label>
                    <input name="tel" id="tel" type="tel" class="form-control" placeholder="(+00)ppppnnnnn" pattern="((((\+|00)[1-9]{2})|0)?([1-9]{2,3}))([0-9]{6,10})" title="Inserire il numero di telefono nel formato (+|00)<pref. int.><pref. loc.><numero> oppure 0<pref. loc.><numero>"
                        size="20" maxlength="20" disabled />
                    <div class="invalid-feedback">
                        ((+ / 00)(pref. int.) / 0)(pref. loc)(numero)
                    </div>
                </div>
            </div>

            <p class="lead h3">Autenticazione</p>
            <div class="form-group">
                <label for="email">E-mail *</label>
                <input name="email" id="email" type="email" class="form-control" size="32" maxlength="40" required/>
                <div class="invalid-feedback">
                    Inserire indirizzo e-mail
                </div>
            </div>

            <div class="form-group">
                <label for="pass">Password *</label>
                <input name="pass" id="pass" type="password" class="form-control" title="Almeno 8 caratteri, una lettera maiuscola e un numero" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).{8,}$" size="32" maxlength="40" required/>
                <div class="invalid-feedback">
                    Almeno 8 caratteri di cui uno maiuscolo e un numero
                </div>
                <div class="valid-feedback text-warning">
                    Password media
                </div>
            </div>

            <div class="form-group">
                <label for="repass">Reinserisci password *</label>
                <input name="repass" id="repass" type="password" class="form-control" size="32" maxlength="40" required/>
                <div class="invalid-feedback">
                    Le password devono coincidere
                </div>
            </div>
            <button name="ok" id="ok" type="submit" class="btn btn-primary mt-3" formtarget="_blank">Invia</button>
            <button class="btn btn-primary mt-3" type="reset" onclick="document.getElementById('myForm').reset()">ripulisci form</button>
        </form>
        <!--contatti-->
        <div class=" jumbotron text-left py-3 " style="margin-bottom:0; background-color:#e9efe94d;">
            <div class="d-flex flex-row flex-wrap justify-content-around ">
                <div>
                    <p class="lead ">Contatti</p>
                    <p>Via delle Rose, 45</p>
                    <p>12345, Forlimpopoli</p>
                    <p><i class="fas fa-envelope "></i>
                        <a href="mailto:farmacia@aziendaFarmacie.it ">farmacia@aziendaFarmacie.it</a>
                    </p>
                    <p class="lead ">Seguici su</p>
                    <p>
                        <a href="# "><i class="fab fa-facebook-square " style="font-size: 24px;color: #3b5998 "></i></a>
                        <a href="# "><i class="fab fa-twitter-square " style="font-size: 24px;color: #1da1f2 "></i></a>
                        <a href="# "><i class="fab fa-instagram " style="font-size: 24px;color: #e56969 "></i></a>
                    </p>
                </div>
                <div>
                    <p class="lead ">I nostri partner</p>
                    <ul class="list-unstyled ">
                        <li class="media mt-3 ">
                            <a class="d-flex align-middle " href="# ">
                                <img src="../utils/avatar donna.jpg" style="width: 40px; " alt="Partner 1 ">
                            </a>
                            <div class="media-body ml-2 ">
                                <h5>Partner 1</h5>
                                <span class="text-info ">Azienda specializzata in ...</span>
                            </div>
                        </li>
                        <li class="media mt-3 ">
                            <a class="d-flex align-middle " href="# ">
                                <img src="../utils/avatar uomo.png " style="width: 40px; " alt="Partner 2 ">
                            </a>
                            <div class="media-body ml-2 ">
                                <h5>Partner 2</h5>
                                <span class="text-info ">Leader nel settore ...</span>
                            </div>
                        </li>
                        <li class="media mt-3 ">
                            <a class="d-flex align-middle " href="# ">
                                <img src="../utils/avatar donna.jpg" style="width: 40px; " alt="Partner 3 ">
                            </a>
                            <div class="media-body ml-2 ">
                                <h5>Partner 3</h5>
                                <span class="text-info "> Azienda leader ...</span>
                            </div>
                        </li>
                    </ul>
                    <p class="font-italic " style="font-size: 1.1rem ">&copy; Alcoraci Irene</p>
                </div>
            </div>
        </div> 
<script>
    $(document).ready(function() {
              

        $('#address').focusout(function(ev) {
            if ($(this).val() != '') {
                $('.form-row input').not('#address').removeAttr('disabled');
                $('.form-row input').not('#address').attr('required', 'required');
            } else {
                $('.form-row input').not('#address').attr('disabled', 'disabled');
                $('.form-row input').not('#address').removeAttr('required');
            }
        }).keydown(function(ev) {
            if (ev.keyCode == 9) { // pressione TAB
                if ($(this).val() != '') {
                    $('.form-row input').not('#address').removeAttr('disabled');
                    $('.form-row input').not('#address').attr('required', 'required');
                } else {
                    $('.form-row input').not('#address').attr('disabled', 'disabled');
                    $('.form-row input').not('#address').removeAttr('required');
                }
            }
        });

        $('#repass').change(function(ev) {
            if ($(this).val() != $('#pass').val()) {
                $(this).val('').attr('placeholder', 'Password non coincidenti!').focus();
            }
        });     

        $('#myForm').submit(function(ev) {

            if (this.checkValidity() === false) {
                $(this).removeClass('needs-validation').addClass('was-validated');
            } else {
                // finestra di riepilogo
                let data = new FormData(this);
                let w = window.open("", "Recap ", "width=600, height=600 ");

                $(w.document.body).html(`<h1>Riepilogo dati utente: ${data.get('nome')}&nbsp; ${data.get('cognome')}</h1><br><br>\
        <table>\
            <tr><th align='left'>Genere:</th><td>${data.get('gender')=='male'?'Uomo':'Donna'}</td></tr>\
            <tr><th align='left'>Data e luogo di nascita:</th><td>${new Date(data.get('birthdate')).toLocaleDateString()}\
                , ${data.get('town')} (${data.get('state').toUpperCase()}) - ${data.get('region')}</td></tr>\
            <tr><th align='left'>Indirizzo:</th><td>${data.get('address')} n. ${data.get('addressnum')}\
                , ${data.get('cap')} ${data.get('city')}</td></tr>\
            <tr><th align='left'>N. telefonico:</th><td>${data.get('tel')}</td></tr>\
            <tr><th align='left'>Email:</th><td>${data.get('email')}</td></tr>\
        </table>`);

     

            }

            // inibisce la navigazione verso la url inserita nell'attributo action della form
            ev.preventDefault()
            ev.stopPropagation()

            return false;
        });

    });
</script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
     </body>
</html>